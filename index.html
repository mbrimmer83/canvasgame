<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hero</title>
  <link rel="stylesheet" href="canvasgame.css">
</head>
<body>
  <div id="top-box">
    <p>Hero Game</p>
  </div>
  <canvas id="canvas" width="512" height="480"></canvas>
  <script>
  var mainCounter = 0;
  var heroX = 200;
  var heroY = 200;
  var speed = 2;
  var idx1 = 0;
  var idx2 = 0;
  var idx3 = 0;
  var idx4 = 0;
  var idx5 = 0;
  var idx6 = 0;
  var score = 0;
  var highScore = 0;
  var shout = "";
  var state1 = 'off';
  var state2 = 'off';
  var state3 = 'off';
  var state4 = 'off';
  window.addEventListener('keydown', function(e) {
    var key = e.keyCode;
    if (key === 37) { // left
      state1 = 'on';
    }
    if (key === 39) { // right
      state2 = 'on'
    }
    if (key === 38) { // up
      state3 = 'on';
    }
    if (key === 40) { // down
      state4 = 'on';
    }
    if (heroX > 512) {
      heroX = 0;
    }
    if (heroY > 480) {
      heroY = 0;
    }
    if (heroX < 0) {
      heroX = 512;
    }
    if (heroY < 0) {
      heroY = 480;
    }
  });

  var monsterX = 100;
  var monsterY = 25;
  var monsterXSpeed = 2;
  var monsterYSpeed = 2;
  function monsterMovement() {
    if (mainCounter === 75) {
      idx1 = Math.floor(Math.random() * 3 - 1);
      idx2 = Math.floor(Math.random() * 3 - 1);
      mainCounter = 0;
      shout = "";
    }
    monsterX += (monsterXSpeed * idx1);
    monsterY += (monsterYSpeed * idx2);
      // if (idx === 0) {
      //   monsterX -= monsterSpeed;
      // } else if (idx === 1) {
      //   monsterX += monsterSpeed;
      // } else if (idx === 2) {
      //   monsterY += monsterSpeed;
      // } else if (idx === 3) {
      //   monsterY -= monsterSpeed;
      // } else if (idx === 4) {
      //   monsterX -= monsterSpeed;
      //   monsterY -= monsterSpeed;
      // } else if (idx === 5) {
      //   monsterX += monsterSpeed;
      //   monsterY += monsterSpeed;
      // } else if (idx === 6) {
      //   monsterX -= monsterSpeed;
      //   monsterY += monsterSpeed;
      // } else if (idx === 7) {
      //   monsterX += monsterSpeed;
      //   monsterY -= monsterSpeed;
      // }
    if (monsterX > 512) {
      monsterX = 0;
    }
    if (monsterY > 480) {
      monsterY = 0;
    }
    if (monsterX < 0) {
      monsterX = 512;
    }
    if (monsterY < 0) {
      monsterY = 480;
    }
    mainCounter += 1;
  }
function checkWinner () {
  if (monsterX + 32 < heroX) {
  } else if (heroX + 32 < monsterX) {
  } else if (monsterY + 32 < heroY) {
  } else if (heroY + 32 < monsterY) {
  } else {
    score += 1;
    monsterX = Math.floor(Math.random() * 400);
    monsterY = Math.floor(Math.random() * 400);
    shout = "Hooray";
  }
  if (score > highScore) {
    highScore = score;
  }
}
var goblin1X = 100;
var goblin1Y = 100;
var goblin2X = 300;
var goblin2Y = 300;
// function goblinRandom() {
//   goblin1X = Math.floor(Math.random() * 400);
//   goblin1Y = Math.floor(Math.random() * 400);
//   goblin2X = Math.floor(Math.random() * 400);
//   goblun2Y = Math.floor(Math.random() * 400);
// }

function goblin1Movement() {
  if (mainCounter === 75) {
    idx3 = Math.floor(Math.random() * 3 - 1);
    idx4 = Math.floor(Math.random() * 3 - 1);
    mainCounter = 0;
  }
  goblin1X += (monsterXSpeed * idx3);
  goblin1Y += (monsterYSpeed * idx4);
  if (goblin1X > 512) {
    goblin1X = 0;
  }
  if (goblin1Y > 480) {
    goblin1Y = 0;
  }
  if (goblin1X < 0) {
    goblin1X = 512;
  }
  if (goblin1Y < 0) {
    goblin1Y = 480;
  }
  mainCounter += 1;
}

function goblin2Movement() {
  if (mainCounter === 75) {
    idx5 = Math.floor(Math.random() * 3 - 1);
    idx6 = Math.floor(Math.random() * 3 - 1);
    mainCounter = 0;
  }
  goblin2X += (monsterXSpeed * idx5);
  goblin2Y += (monsterYSpeed * idx6);
  if (goblin2X > 512) {
    goblin2X = 0;
  }
  if (goblin2Y > 480) {
    goblin2Y = 0;
  }
  if (goblin2X < 0) {
    goblin2X = 512;
  }
  if (goblin2Y < 0) {
    goblin2Y = 480;
  }
  mainCounter += 1;
}

function heroMovement() {
  if (state1 === 'on') {
  heroX -= speed;
} else if (state2 === 'on') {
  heroX += speed;
} else if (state3 === 'on') {
  heroY -= speed;
} else if (state4 === 'on') {
  heroY += speed;
}
}

  var hero = new Image();
  hero.src = '../canvasgame/images/hero.png';

  var herobackground = new Image();
  herobackground.src = '../canvasgame/images/background.png';

  var monster = new Image();
  monster.src = '../canvasgame/images/monster.png';

  var goblin = new Image();
  goblin.src = '../canvasgame/images/goblin.png';

  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext('2d');

  function main() {
    ctx.fillRect(0, 0, 400, 400);
    ctx.beginPath();
    ctx.drawImage(herobackground, 0, 0, 512, 480);
    ctx.font = "25px serif";
    ctx.fillText('Score: ' + score, 40, 50);
    ctx.fillText('High score: ' + highScore, 40, 75);
    ctx.fillText(shout, 220, 240);
    ctx.drawImage(monster, monsterX, monsterY, 25, 25);
    ctx.drawImage(hero, heroX, heroY, 25, 25);
    ctx.drawImage(goblin, goblin1X, goblin1Y, 25, 25);
    ctx.drawImage(goblin, goblin2X, goblin2Y, 25, 25);
    ctx.fill();

    requestAnimationFrame(main);
    checkWinner();
    heroMovement();
    monsterMovement();
    goblin1Movement();
    goblin2Movement();
  }
  main();
  </script>
</body>
</html>
